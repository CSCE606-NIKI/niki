
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard</title>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
  

</head>



<style>
    .navbar-custom {
        background-color: #004a7c;
    }

    .navbar-custom .navbar-brand, 
    .navbar-custom .nav-link {
        color: white;
    }

    .btn-custom {
        background-color: #500000;
        color: white;
    }
</style>

<body>

<nav class="navbar navbar-expand-lg navbar-custom">


    <ul class="navbar-nav ml-auto">
        <li class="nav-item dropdown">
            <a class="nav-link dropdown-toggle" href="#" id="profileDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                Profile
            </a>
            <div class="dropdown-menu dropdown-menu-right" aria-labelledby="profileDropdown">
                <a class="dropdown-item" href="#">Edit Profile</a>
                <% if current_user %>
                    <%= form_tag logout_path, method: :delete, class: "dropdown-item" do %>
                        <%= submit_tag 'Logout', class: "btn btn-custom btn-link", style: "background: none; border: none;" %>
                    <% end %>
                <% else %>
                    <%= form_tag login_path, method: :get, class: "dropdown-item" do %>
                        <%= submit_tag 'Log in', class: "btn btn-custom btn-link", style: "background: none; border: none;" %>
                    <% end %>
                    <%= form_tag new_user_path, method: :get, class: "dropdown-item" do %>
                        <%= submit_tag 'Sign up', class: "btn btn-custom btn-link", style: "background: none; border: none;" %>
                    <% end %>
                <% end %>
            </div>
        </li>
    </ul>
</nav>

<!-- Main Dashboard-->
<div class="container mt-5">
    <h1>Welcome to the Dashboard</h1>
    <h2>Summary</h2>
    <h2>Credits</h2>
</div>


<%= stylesheet_link_tag 'credits.css' %>


<div class="table-container">

  <label for="credits">Filter by: </label>
  <select name="credits" id="filter_selector">
    <option value="">Select column</option>
    <option value="0">Credit ID</option>
    <option value="1">Date</option>
    <option value="2">Status</option>
    <option value="3">Type</option>
    <option value="4">Credit Value</option>
    <option value="5">Description</option>
  </select>
  = 
  <input type="text" id="filter_input" placeholder="Search for credits..">

  <table id="credit_table" class="table table-striped table-bordered table-hover">
    <thead class="table-dark">
      <tr>
        <th>Credit ID</th>
        <th>Date</th>
        <th>Status</th>
        <th>Type</th>
        <th>Credit Value</th>
        <th>Description</th>
        <th>Actions</th>
      </tr>
    </thead>

    <tbody>
      <% @credits.each do |credit| %>
        <tr>
          <td><%= credit.id %></td>
          <td><%= credit.date %></td>
          <td><%= credit.status %></td>
          <td><%= credit.type %></td>
          <td><%= credit.credit_value %></td>
          <td style="max-width: 400px; word-wrap: break-word;"><%= credit.description %></td>
          <td>
            <%= link_to "Show this credit", credit %>
          </td>
        </tr>
      <% end %>
    </tbody>
  </table>

  <script>
  document.getElementById("filter_input").addEventListener("keyup", filterFunction);

  function filterFunction() {
    var input, filter, table, tr, td, i, txtValue;
    input = document.getElementById("filter_input");
    filter = input.value.toUpperCase();
    table = document.getElementById("credit_table");
    tr = table.getElementsByTagName("tr");
    
    for (i = 0; i < tr.length; i++) {
      column = document.getElementById("filter_selector").value;
      td = tr[i].getElementsByTagName("td")[column];
      if (td) {
          txtValue = td.textContent || td.innerText;
          if (txtValue.toUpperCase().indexOf(filter) > -1) {
              tr[i].style.display = "";
          } else {
              tr[i].style.display = "none";
          }
      }
    }
  }
  </script>
</div>

<div style="text-align: center;">
  <%= link_to "New credit", new_credit_path, class: "btn btn-secondary"%>
</div>


<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.16.0/umd/popper.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>

</body>
</html>