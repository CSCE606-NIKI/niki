
<!DOCTYPE html>
<html lang="en">


<style>

.credit-table {
  width: 100%;
  border-collapse: collapse;
  margin-top: 20px;
}

.credit-table th, .credit-table td {
  border: 1px solid #ddd;
  padding: 8px;
  text-align: left;
}

.credit-table th {
  background-color: #f2f2f2;
}

.credit-table tr:nth-child(even) {
  background-color: #f2f2f2;
}

.credit-table tr:hover {
  background-color: #ddd;
}
.progress-bar-container {
    margin-bottom: 20px;
    background-color: #f3f3f3;
    padding: 3px;
    border-radius: 20px;
    box-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);
}

.progress-bar {
    background-color: #004a7c;
    text-align: center;
    padding: 10px 0;
    border-radius: 20px;
    color: white;
    font-weight: bold;
    transition: width 0.4s ease-out;
}

.progress-label {
    font-size: 18px;
    font-weight: bold;
    margin-bottom: 10px;
    text-align: center;
}

</style>
<!-- Main Dashboard-->
<div class="container mt-5">
    <h1>Welcome to the Dashboard</h1>
    
    <h2>Summary Credits</h2>

    <% sum_of_credits = @credit_totals.values.sum %>
    
    <div class="progress-bar-container">
        <div class="progress-bar" style="width: <%= [((sum_of_credits / 15.0) * 100), 100].min %>%;">
            <%= sum_of_credits %> / 15 Credits
        </div>
    </div>
    <!--<div class="progress-label">Credit Tracker</div>-->
    <!--<canvas id="creditChart" width="400" height="200"></canvas>-->

    <table class="styled-table">
    <thead>
        <tr>
            <th>Credit Type</th>
            <th>Total Credits</th>
        </tr>
    </thead>
    <tbody>
        <% @credit_totals.each do |credit_type, total_credits| %>
        <tr>
            <td><%= credit_type %></td>
            <td><%= total_credits %></td>
        </tr>
        <% end %>
    </tbody>
    </table>
 

    <br/>
    <hr/>
    <h3>Credit List</h3>
    <table class="styled-table">
    <thead>
        <tr>
        <th>Credit Type</th>
        <th>Date</th>
        <th>Amount</th>
        <th>Description</th>
        <th>Actions</th>
        </tr>
    </thead>
    <tbody>
        <% @credits.each do |credit| %>
        <tr>
            <td><%= credit.credit_type %></td>
            <td><%= credit.date %></td>
            <td><%= credit.amount %></td>
            <td style="max-width: 400px; word-wrap: break-word;"><%= credit.description %></td>
            <td>
              <%= link_to "Show this credit", credit %>
            </td>
        </tr>
        <% end %>
    </tbody>
    </table>
    <br>
    <div style="text-align: center;">
      <%= link_to "New credit", new_credit_path, class: "btn btn-secondary"%>
    </div>  

    
</div>

<!--
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.16.0/umd/popper.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<script>
$(document).ready(function(){
    let creditLabels = [];
    let creditData = [];
    
    <% @credit_totals.each do |credit_type, total_credits| %>
        creditLabels.push("<%= credit_type %>");
        creditData.push(<%= total_credits %>);
    <% end %>
    
    var ctx = document.getElementById('creditChart').getContext('2d');
    var creditChart = new Chart(ctx, {
        type: 'bar', // can also use 'line', 'doughnut', etc.
        data: {
            labels: creditLabels,
            datasets: [{
                label: 'Total Credits',
                data: creditData,
                backgroundColor: 'rgba(75, 192, 192, 0.2)', 
                borderColor: 'rgba(75, 192, 192, 1)',
                borderWidth: 1
            }]
        },
        options: {
            scales: {
                y: {
                    beginAtZero: true
                }
            }
        }
    });
});
</script>-->

</body>
</html>